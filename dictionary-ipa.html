<!DOCTYPE html>
<html>
<head>
    <title>IPA transcriber for 塔吉克汉词典</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script type="text/javascript">

var conversion = {
"i":"i",
"e":"ɛ",
"a":"a",
"u":"u",
"ü":"ɯ",
"ue":"ɯ",
"o":"o",
"ei":"ej",
"ui":"uj",
"üi":"ɯj",
"uei":"ɯj",
"oi":"oj",
"eu":"ɛw",
"iu":"iw",
"üu":"ɯw",
"ueu":"ɯw",
"ou":"əw",
"b":"b",
"p":"p",
"n":"n",
"w":"w",
"v":"v",
"f":"f",
"zz":"ð",
"ss":"θ",
"d":"d",
"t":"t",
"n":"n",
"l":"l",
"r":"r",
"z":"z",
"s":"s",
"j":"dʑ",
"q":"tɕ",
"zy":"ʑ",
"x":"ɕ",
"y":"j",
"g":"g",
"k":"k",
"gc":"ɣ",
"c":"x",
"kh":"q",
"gh":"ʁ",
"h":"χ",
"hy":"h",
        };

 var maxLength = Object.keys(conversion)
    .reduce((a, b) => a.length > b.length ? a : b) // get the longest word
    .length; // and it's length
  
  function convert (text) {
    var converted = "";
    var cur = 0;
    while (cur < text.length) {
      var testedPhoneme;
      var symbol = undefined;
      for (var length = maxLength; length > 0; length --) {
        testedPhoneme = text.substr(cur, length);
        if (conversion[testedPhoneme]) {
          symbol = conversion[testedPhoneme];
          break; // stop the loop
        }
      }
      if (symbol) {
        converted += symbol;
        cur += testedPhoneme.length;
      }
      else {
        converted += text[cur]
        cur++;
      }
    }
    return converted
  }

  function onInputTextChange(txt) {
    var outputTextareaElem = document.getElementById("output_textarea");
    var div = document.createElement("div");
    var outputHtmlEntities = convert(txt);
    div.innerHTML = outputHtmlEntities;
    outputTextareaElem.value = div.innerText;
  }


        function select() {
          const input = document.getElementById('input_textarea');
          input.focus();
          input.select();
        }   
        function copytext() {
          var copyText = document.getElementById("output_textarea");
          copyText.select();
          copyText.setSelectionRange(0, 99999)
          document.execCommand("copy");
        }
    </script>
    
<style>
html {font-family:arial}
table {
  border-collapse: collapse;
  width: 90%;
}
td, th {
  border: 1px solid #AAA;
  text-align: center;
  padding: 1px;
}
textarea {
	font-size: 13pt;
	font-family: Arial;
    width: 96%;
} 
.note {
  border: 1px solid #DDD;
  width: 45%;
  text-align: left;
  padding-left: 30px;
  padding-right: 30px;
  padding-top: 10px;
  padding-bottom: 10px;
}
.convtab {
overflow-y: scroll; 
height:200px;
width:170px;
}
</style>


</head>
<body>    

<center><h1 class="text-center">IPA transcriber for 塔吉克汉词典</h1></center>

<center>
<table>
<thead>
<tr>
<th>	
<button onclick="select('input_textarea')">Select all</button>
<button onclick="document.getElementById('input_textarea').value = ''">Clear</button>
</th>
<th>
<button onclick="copytext()">Copy</button>

</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<textarea
id="input_textarea"
autofocus=""
placeholder="Input"
rows="10"
oninput="onInputTextChange(this.value)"></textarea>    
</td>
<td>
<textarea rows="10" placeholder="Output" id="output_textarea"></textarea>    
</td>

</tr>
</tbody>
</table>
</center>

<br>    
<center>
<div class="note">
<center><h3>Notes</h3></center>

<div>
	<p>phonology based on: Kim, Deborah. <em><a href="https://www.lotpublications.nl/Documents/467_fulltext.pdf">Topics in the syntax of Sarikoli</a></em></p>
	<p>i = [i]</p>
	<p>e = [ɛ]</p>
	<p>a = [a]</p>
	<p>u = [u]</p>
	<p>ü / ue = [ɯ]</p>
	<p>o = [o]</p>
	<p>ei = [ej]</p>
	<p>ui = [uj]</p>
	<p>üi / uei = [ɯj]</p>
	<p>oi = [oj]</p>
	<p>eu = [ɛw]</p>
	<p>iu = [iw]</p>
	<p>ou = [əw]</p>
	<p>b = [b]</p>
	<p>p = [p]</p>
	<p>n = [n]</p>
	<p>w = [w]</p>
	<p>v = [v]</p>
	<p>f = [f]</p>
	<p>zz = [ð]</p>
	<p>ss = [θ]</p>
	<p>d = [d]</p>
	<p>t = [t]</p>
	<p>n = [n]</p>
	<p>l = [l]</p>
	<p>r = [r]</p>
	<p>dz = [dz]</p>
	<p>ts = [ts]</p>
	<p>z = [z]</p>
	<p>s = [s]</p>
	<p>j = [dʑ]</p>
	<p>q = [tɕ]</p>
	<p>zy = [ʑ]</p>
	<p>x = [ɕ]</p>
	<p>y = [j]</p>
	<p>g = [g]</p>
	<p>k = [k]</p>
	<p>gc = [ɣ]</p>
	<p>c = [x]</p>
	<p>kh = [q]</p>
	<p>gh = [ʁ]</p>
	<p>h = [χ]</p>
	<p>hy = [h]</p>
</div>
	<b>Sources:</b><br>高尔锵 <i>塔吉克汉词典.</i> 成都：四川民族出版社，1996.<br>Kim, Deborah. <i>Topics in the syntax of Sarikoli.</i> Leiden University, 2017.
</div>
</center>


</body>
</html>
